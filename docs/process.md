# Process


### how to run
The process scripts (and the Process class) is designed to analyse one single dataset (i.e. not multiple segments), coming from one single JSON.
Similar to _Prepare_, it is designed off a `config` dict that should be all that is needed to run the analysis.
For bespoke analysis, a new class may be created which inherits from `Process`.
Since the config files across segments may be identical but for the filenames, these can be added as command line arguments (TO DO).
The analysis is designed to be restarted at various checkpoints (TO DO)

### input
The only input accespted is a single JSON generated such as that generated by [prepare](./prepare.md)

### Config dict

##### Basic settings
* `dir` the current directory - not _augur_ but the pathogen itself
* `output` dict with 2 keys: `data` & `auspice`. (Default: `"output": {"data": "processed","auspice": "auspice",}`
  * `data`: progress files intermediate FASTAs, nexus trees etc
  * `auspice`: the finished JSONs for display in auspice
* `in` {string}: The prepared JSON file. Sometimes defined by command line arguments

##### Analysis settings
* `geo_inference` {`False` || array of strings} (Default: `False`) what traits to perform geographic inference (mugration model) upon
* `geo_inference_likelihoods` {bool} (Default: `False`) Include likelihoods from any geographic inference analysis.
* `temporal_confidence` {bool} (Default: `False`) Include 90% confidence intervals from treetime dating analysis.

##### Auspice output settings
* `auspice`
  * `panels` {array} (default: `['tree', 'map', 'entropy']`)
  * `extra_attr` {array} (default: `[]`)
  * `date_range`
  * `analysisSlider`: optional. If specified, this should be a key present in `color_options`, with `type`: continuous
  * `color_options`
    * `<trait name>`
      * `key`
      *  `legendTitle`: String appearing in Auspice legend
      * `menuItem`: String appearing in Auspice colorBy drop down menu
      * `type`: continuous / integer / discrete
  * `controls` {dict} (default: `{}`)
    * `geographic_location`
    * `authors`


### Current status:
| Input        | Status           |
| ------------- | ------------- |
| basic analysis      | DONE |
| restarting    | alignment done, tree to do  |
| command line args | to do      |
| titers | to do      |
| clade frequencies | to do      |
| docs | ongoing |

| Input        | Status           |
| ------------- | ------------- |
| H7N9      | working |
| zika    | working      |
| seasonal flu | to do      |
| ebola | to do      |
| dengue | to do      |
